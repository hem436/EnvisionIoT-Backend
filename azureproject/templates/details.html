<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EnvisionIoT</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous"
      referrerpolicy="no-referrer" />
    <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}">
    <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}"  crossorigin="use-credentials" />
    <meta name="description" content="A demo flask progressive web app">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles1.css') }}">
    <link href="/static/duration-picker.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery.min.js"></script>
    <script src="/static/duration-picker.js"></script>
 
  </head>

  <body>
    <nav class="navbar fixed-top bg-primary navbar-dark z-3 " style="z-index: 3;">
      <div class="container-fluid justify-content-between">
        <div class="d-flex">
          <button
            class="btn"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasExample"
            aria-controls="offcanvasExample"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          

          <a class="navbar-brand align-self-center ms-2" href="#"
            >Envision IOT</a
          >
        </div>

        <!-- <form class="d-flex" role="search">
          <input
            class="form-control me-2"
            type="search"
            placeholder="Search"
            aria-label="Search"
          />
          <button class="btn btn-outline-light" type="submit">Search</button>
        </form> -->
        <div class="dropdown">
          <button
            class="btn btn-secondary bg-primary border-0"
            type="button"
            data-bs-toggle="dropdown"
            data-bs-offset="10,20"
            aria-expanded="false"
          >
            Profile
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              fill="currentColor"
              class="bi bi-person-circle"
              viewBox="0 0 16 16"
            >
              <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
              <path
                fill-rule="evenodd"
                d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"
              />
            </svg>
          </button>

          <ul
            class="dropdown-menu dropdown-menu-end border-primary"
            style="top: 120%"
          >
            <li><a class="dropdown-item" href="#">Action</a></li>
            <li><a class="dropdown-item" href="#">Another action</a></li>
            <li><a class="dropdown-item" href="#">Something else here</a></li>
            <li><hr class="dropdown-divider bg-primary" /></li>
            <li><a class="dropdown-item" href="/logout">Log Out</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="offcanvas offcanvas-start  border border-end-1 border-primary " tabindex="1" data-bs-backdrop="false" id="offcanvasExample"  aria-labelledby="offcanvasExamplelabel" style="z-index: 2;" >
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" >menu</h5>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="close"  ></button>
      </div>   
      <div class="offcanvas-body ">
          <nav class="nav nav-pills  flex-column h-100" >
            <div class="mb-auto">
              <a class="nav-link active" aria-current="page"  href="/">Home</a>
              <a class="nav-link link-dark"  href="/create">Add a device</a>
              <a class="nav-link link-dark"  href="#">Device details</a>
              <a class="nav-link link-dark"  href="#">overview</a>
            </div>
            <hr class="hr hr-blurry" >
            <a class="btn btn-outline-primary mb-2" href="/logout" >Logout</a>
          </nav>
      </div>
    </div>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Devices - {{device.room_name}}</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/icon?family=Material+Icons"
  />  
  <div class="head">
    <button class="add_device" role="button">Add Device</button>
    <!--<div class="space-ext"></div>-->
    <h1 id="heading">{{device.room_name}} - Device Control</h1>
    <div class="space-ext"></div>
    <!--This checkbox input below controls the auto & manual mode of all devices at the same time-->
    <input type="checkbox" id="smart/manual" class="mode_control" />
    <img
      src="/static/img/MANUAL_MODE.png"
      id="manual"
      class="image-toggle"
      alt="manual"
      onclick="toggleImage()"
    />
    <img
      src="/static/img/SMART_MODE.png"
      id="smart"
      class="image-toggle"
      alt="smart"
      onclick="toggleImage()"
    />
  
    <script>
      function toggleImage() {
        var image1 = document.getElementById("manual");
        var image2 = document.getElementById("smart");
  
        var checkbox = document.getElementById("smart/manual");
        checkbox.checked = !checkbox.checked;
  
        if (image1.style.display === "none") {
          image1.style.display = "inline";
          image2.style.display = "none";
        } else {
          image1.style.display = "none";
          image2.style.display = "inline";
        }
      }
    </script>
    <button class="set_scene" role="button">Schedule Activity</button>
  </div>
  
  <div class="table_head">
    <div class="sub">Visual</div>
    <div class="sub">Device Name</div>
    <div class="sub">Switch</div>
    <div class="sub">Control Mode</div>
    <div class="sub">Regulator</div>
  </div>


  <div id="details-section">
  {% for appliance in device.device_appliance %} {% if "Light 1" in appliance.name %}
  <div class="appliances1" id="light1">
    <a id="del" href="#"><img class="del" src="/static/img/trash-bin.png" alt="" /></a>
    <div class="image-container">
      <img id="light1off" class="visual" src="/static/img/LIGHT_OFF.png" alt="" />
    </div>
    <h2 id="normal1" class="normal">Light 1</h2>
    <div class="controlshift">
      <label>
        <!--This checkbox input below is the ON and OFF switch of light 1-->
        <input
          type="checkbox"
          id="on/off1"
          class="on-off"
          onclick="lightswitch1()"
        />
        <span class="check"></span>
      </label>
      <div class="space"></div>
      <!--This checkbox input below controls the auto & manual mode of light 1-->
      <input type="checkbox" id="smart/manual1" class="mode_control" />
      <img
        src="/static/img/MANUAL_MODE.png"
        id="manual1"
        class="image-toggle"
        alt="manual"
        onclick="toggleImage1()"
      />
      <img
        src="/static/img/SMART_MODE.png"
        id="smart1"
        class="image-toggle"
        alt="smart"
        onclick="toggleImage1()"
      />
  
      <script>
        function toggleImage1() {
          var image1 = document.getElementById("manual1");
          var image2 = document.getElementById("smart1");
  
          var checkbox = document.getElementById("smart/manual1");
          checkbox.checked = !checkbox.checked;
  
          if (image1.style.display === "none") {
            image1.style.display = "inline";
            image2.style.display = "none";
          } else {
            image1.style.display = "none";
            image2.style.display = "inline";
          }
        }
      </script>
    </div>
  </div>
  {% elif "Light 2" in appliance.name %}
  <div class="appliances1" id="light2">
    <a id="del" href="#"><img class="del" src="/static/img/trash-bin.png" alt="" /></a>
    <div class="image-container">
      <img id="light2off" class="visual" src="/static/img/LIGHT_OFF.png" alt="" />
    </div>
    <h2 id="normal2" class="normal">Light 2</h2>
    <div class="controlshift">
      <label>
        <!--This checkbox input below is the ON and OFF switch of light 2-->
        <input
          type="checkbox"
          id="on/off2"
          class="on-off"
          onclick="lightswitch2()"
        />
        <span class="check"></span>
      </label>
      <div class="space"></div>
      <!--This checkbox input below controls the auto & manual mode of light 2-->
      <input type="checkbox" id="smart/manual2" class="mode_control" />
      <img
        src="/static/img/MANUAL_MODE.png"
        id="manual2"
        class="image-toggle"
        alt="manual"
        onclick="toggleImage2()"
      />
      <img
        src="/static/img/SMART_MODE.png"
        id="smart2"
        class="image-toggle"
        alt="smart"
        onclick="toggleImage2()"
      />
  
      <script>
        function toggleImage2() {
          var image1 = document.getElementById("manual2");
          var image2 = document.getElementById("smart2");
  
          var checkbox = document.getElementById("smart/manual2");
          checkbox.checked = !checkbox.checked;
  
          if (image1.style.display === "none") {
            image1.style.display = "inline";
            image2.style.display = "none";
          } else {
            image1.style.display = "none";
            image2.style.display = "inline";
          }
        }
      </script>
    </div>
  </div>
  
  {% elif "Fan" in appliance.name %}
  <div class="appliances1" id="fan">
    <a id="del" href="#"><img class="del" src="/static/img/trash-bin.png" alt="" /></a>
    <div class="image-container">
      <img id="fanoff" class="visual" src="/static/img/FAN_OFF.png" alt="" />
    </div>
    <h2 id="normal3" class="normal">Fan</h2>
    <div class="controlshift">
      <label>
        <!--This checkbox input below is the ON and OFF switch of fan-->
        <input
          type="checkbox"
          id="on/off3"
          class="on-off"
          onclick="fanswitch()"
        />
        <span class="check"></span>
      </label>
      <div class="space"></div>
      <!--This checkbox input below controls the auto & manual mode of the fan-->
      <input type="checkbox" id="smart/manual3" class="mode_control" />
      <img
        src="/static/img/MANUAL_MODE.png"
        id="manual3"
        class="image-toggle"
        alt="manual"
        onclick="toggleImage3()"
      />
      <img
        src="/static/img/SMART_MODE.png"
        id="smart3"
        class="image-toggle"
        alt="smart"
        onclick="toggleImage3()"
      />
      <script>
        function toggleImage3() {
          var image1 = document.getElementById("manual3");
          var image2 = document.getElementById("smart3");
  
          var checkbox = document.getElementById("smart/manual3");
          checkbox.checked = !checkbox.checked;
  
          if (image1.style.display === "none") {
            image1.style.display = "inline";
            image2.style.display = "none";
          } else {
            image1.style.display = "none";
            image2.style.display = "inline";
          }
        }
      </script>
      <div class="space"></div>
      <div id="SetRange">
        <span id="rangeValue" class="rangeValue">0</span>
        <input
          type="range"
          class="range"
          name=""
          value="0"
          min="0"
          max="100"
          id="regulator"
          onmousemove="rangeSlider(this.value)"
          onchange="rangeSlider(this.value)"
        />
      </div>
    </div>
    <!--This script tag is specific to the range slider.-->
    <script type="text/javascript">
      function rangeSlider(value) {
        document.getElementById("rangeValue").innerHTML = value;
      }
    </script>
  </div>
  
  {% elif "Socket" in appliance.name %}
  <div class="appliances1" id="socket">
    <a id="del" href="#"><img class="del" src="/static/img/trash-bin.png" alt="" /></a>
    <div class="image-container">
      <img id="socketoff" class="visual" src="/static/img/SOCKET_PLUG_OUT.png" alt="" />
    </div>
    <h2 id="normal4" class="normal">Socket</h2>
    <div class="controlshift">
      <label>
        <!--This checkbox input below is the ON and OFF switch of socket-->
        <input
          type="checkbox"
          id="on/off4"
          class="on-off"
          onclick="socketswitch()"
        />
        <span class="check"></span>
      </label>
      <div class="space"></div>
      <!--This checkbox input below controls the auto & manual mode of the fan-->
      <input type="checkbox" id="smart/manual4" class="mode_control" />
      <img
        src="/static/img/MANUAL_MODE.png"
        id="manual4"
        class="image-toggle"
        alt="manual"
        onclick="toggleImage4()"
      />
      <img
        src="/static/img/SMART_MODE.png"
        id="smart4"
        class="image-toggle"
        alt="smart"
        onclick="toggleImage4()"
      />
      <script>
        function toggleImage4() {
          var image1 = document.getElementById("manual4");
          var image2 = document.getElementById("smart4");
  
          var checkbox = document.getElementById("smart/manual4");
          checkbox.checked = !checkbox.checked;
  
          if (image1.style.display === "none") {
            image1.style.display = "inline";
            image2.style.display = "none";
          } else {
            image1.style.display = "none";
            image2.style.display = "inline";
          }
        }
      </script>
    </div>
  </div>
  {% endif %} {% endfor %}
  
  </div>
  <script>
    function lightswitch1() {
      var checkbox = document.getElementById("on/off1");
      var image = document.getElementById("light1off");
      var back = document.getElementById("light1");
      var text = document.getElementById("normal1");
  
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          image.src = "/static/img/LIGHT_ON_WHITE.png";
          back.classList.add("checked");
          text.classList.add("checked");
        } else {
          image.src = "/static/img/LIGHT_OFF.png";
          back.classList.remove("checked");
          text.classList.remove("checked");
        }
      });
    }
  
    function lightswitch2() {
      var checkbox = document.getElementById("on/off2");
      var image = document.getElementById("light2off");
      var back = document.getElementById("light2");
      var text = document.getElementById("normal2");
  
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          image.src = "/static/img/LIGHT_ON_YELLOW.png";
          back.classList.add("checked");
          text.classList.add("checked");
        } else {
          image.src = "/static/img/LIGHT_OFF.png";
          back.classList.remove("checked");
          text.classList.remove("checked");
        }
      });
    }
  
    function fanswitch() {
      var checkbox = document.getElementById("on/off3");
      var image = document.getElementById("fanoff");
      var back = document.getElementById("fan");
      var text = document.getElementById("normal3");
      var regulator = document.getElementById("regulator");
      var speed = document.getElementById("rangeValue");
  
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          image.src = "/static/img/FAN_ON.gif";
          back.classList.add("checked");
          text.classList.add("checked");
          regulator.classList.add("checked");
          speed.classList.add("checked");
        } else {
          image.src = "/static/img/FAN_OFF.png";
          back.classList.remove("checked");
          text.classList.remove("checked");
          regulator.classList.remove("checked");
          speed.classList.remove("checked");
        }
      });
    }
  
    function socketswitch() {
      var checkbox = document.getElementById("on/off4");
      var image = document.getElementById("socketoff");
      var back = document.getElementById("socket");
      var text = document.getElementById("normal4");
  
      checkbox.addEventListener("change", function () {
        if (checkbox.checked) {
          image.src = "/static/img/SOCKET_PLUG_IN.png";
          back.classList.add("checked");
          text.classList.add("checked");
        } else {
          image.src = "/static/img/SOCKET_PLUG_OUT.png";
          back.classList.remove("checked");
          text.classList.remove("checked");
        }
      });
    }
  </script>
  </body>
  
</html>
  